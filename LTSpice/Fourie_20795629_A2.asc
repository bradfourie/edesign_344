Version 4
SHEET 1 3340 2212
WIRE 848 -1152 736 -1152
WIRE 1024 -1152 928 -1152
WIRE 448 -1104 416 -1104
WIRE 512 -1104 496 -1104
WIRE 560 -1104 512 -1104
WIRE 560 -1056 560 -1104
WIRE -48 -1024 -48 -1088
WIRE -48 -1024 -112 -1024
WIRE 16 -1024 -48 -1024
WIRE 832 -1024 832 -1056
WIRE 736 -1008 736 -1152
WIRE 800 -1008 736 -1008
WIRE 912 -992 864 -992
WIRE 1024 -992 1024 -1152
WIRE 1024 -992 976 -992
WIRE 1136 -992 1024 -992
WIRE 1184 -992 1136 -992
WIRE -112 -976 -112 -1024
WIRE 16 -976 16 -1024
WIRE 560 -976 512 -976
WIRE 640 -976 560 -976
WIRE 800 -976 720 -976
WIRE 1024 -960 1024 -992
WIRE 1136 -944 1136 -992
WIRE 832 -896 832 -960
WIRE -112 -848 -112 -896
WIRE -112 -848 -128 -848
WIRE -48 -848 -112 -848
WIRE 16 -848 16 -912
WIRE 16 -848 -48 -848
WIRE 560 -848 560 -896
WIRE 1024 -848 1024 -880
WIRE 1136 -848 1136 -880
WIRE -48 -816 -48 -848
WIRE 384 -736 336 -736
WIRE 496 -736 464 -736
WIRE 560 -736 496 -736
WIRE 688 -736 640 -736
WIRE 912 -736 800 -736
WIRE 1088 -736 992 -736
WIRE 336 -704 336 -736
WIRE -48 -688 -48 -736
WIRE 896 -608 896 -640
WIRE 592 -592 592 -624
WIRE 800 -592 800 -736
WIRE 864 -592 800 -592
WIRE 496 -576 496 -736
WIRE 560 -576 496 -576
WIRE 976 -576 928 -576
WIRE 1088 -576 1088 -736
WIRE 1088 -576 1040 -576
WIRE 1200 -576 1088 -576
WIRE 1264 -576 1200 -576
WIRE 688 -560 688 -736
WIRE 688 -560 624 -560
WIRE 704 -560 688 -560
WIRE 864 -560 784 -560
WIRE 560 -544 432 -544
WIRE 1088 -544 1088 -576
WIRE 1200 -528 1200 -576
WIRE 896 -496 896 -544
WIRE 592 -480 592 -528
WIRE 688 -480 688 -560
WIRE 1088 -432 1088 -464
WIRE 1200 -432 1200 -464
WIRE 928 -352 928 -384
WIRE 896 -336 864 -336
WIRE 1040 -320 960 -320
WIRE 896 -304 864 -304
WIRE 448 -272 448 -288
WIRE 640 -272 640 -288
WIRE 928 -256 928 -288
WIRE 1152 -224 1120 -224
WIRE 1040 -208 1040 -320
WIRE 1056 -208 1040 -208
WIRE 1184 -192 1184 -240
WIRE 1184 -192 1120 -192
WIRE 1216 -192 1184 -192
WIRE 1328 -192 1296 -192
WIRE 448 -176 448 -192
WIRE 448 -176 416 -176
WIRE 640 -176 640 -192
WIRE 640 -176 608 -176
WIRE 1328 -176 1328 -192
WIRE 448 -160 448 -176
WIRE 640 -160 640 -176
WIRE 928 -128 928 -160
WIRE 896 -112 864 -112
WIRE 1152 -96 1152 -224
WIRE 1152 -96 960 -96
WIRE 896 -80 864 -80
WIRE 448 -64 448 -80
WIRE 640 -64 640 -80
WIRE 1328 -48 1328 -112
WIRE 928 -32 928 -64
WIRE 560 144 560 96
WIRE 672 144 672 96
WIRE 928 176 928 128
WIRE 560 288 560 224
WIRE 672 288 672 224
WIRE 928 320 928 256
FLAG 560 288 0
FLAG 560 96 5V
IOPIN 560 96 Out
FLAG 832 -1056 5V
IOPIN 832 -1056 Out
FLAG 1136 -848 0
FLAG 560 -848 0
FLAG 1024 -848 0
FLAG 928 320 0
FLAG 928 128 input_v
IOPIN 928 128 Out
FLAG 416 -1104 input_v
IOPIN 416 -1104 Out
FLAG 1184 -992 voltage_peak
IOPIN 1184 -992 Out
FLAG 832 -896 0
FLAG 512 -976 v_meas
IOPIN 512 -976 Out
FLAG 672 288 0
FLAG 672 96 -5V
IOPIN 672 96 Out
FLAG 896 -640 5V
IOPIN 896 -640 Out
FLAG 1200 -432 0
FLAG 1088 -432 0
FLAG 1264 -576 current_peak
IOPIN 1264 -576 Out
FLAG 592 -624 5V
IOPIN 592 -624 Out
FLAG 432 -544 input_i
IOPIN 432 -544 Out
FLAG 336 -704 0
FLAG 688 -480 i_meas
IOPIN 688 -480 Out
FLAG 864 -304 v_meas
IOPIN 864 -304 Out
FLAG 928 -384 5V
IOPIN 928 -384 Out
FLAG 928 -256 0
FLAG 1184 -240 pwm
IOPIN 1184 -240 Out
FLAG 864 -80 i_meas
IOPIN 864 -80 Out
FLAG 928 -160 5V
IOPIN 928 -160 Out
FLAG 928 -32 0
FLAG 1328 -48 0
FLAG 640 -64 0
FLAG 640 -288 5V
IOPIN 640 -288 Out
FLAG 608 -176 ref1
IOPIN 608 -176 Out
FLAG 864 -336 ref1
IOPIN 864 -336 Out
FLAG 864 -112 ref2
IOPIN 864 -112 Out
FLAG 448 -64 0
FLAG 448 -288 5V
IOPIN 448 -288 Out
FLAG 416 -176 ref2
IOPIN 416 -176 Out
FLAG -48 -688 0
FLAG -128 -848 input_i
IOPIN -128 -848 Out
FLAG -48 -1088 input_v
IOPIN -48 -1088 Out
FLAG 592 -480 0
FLAG 896 -496 0
SYMBOL voltage 560 128 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL Opamps\\opamp2 832 -1056 R0
WINDOW 3 -108 113 Left 2
SYMATTR Value TLC2272
SYMATTR InstName U1
SYMBOL res 544 -1072 R0
SYMATTR InstName R1
SYMATTR Value 56k
SYMBOL res 544 -992 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 944 -1168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL cap 1120 -944 R0
WINDOW 0 32 -6 Left 2
SYMATTR InstName C1
SYMATTR Value 20µ
SYMBOL res 1008 -976 R0
WINDOW 3 41 74 Left 2
SYMATTR Value 1000k
SYMATTR InstName R4
SYMBOL diode 912 -1008 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value D1N4007
SYMBOL res 736 -992 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL diode 448 -1120 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value D1N4007
SYMBOL voltage 928 160 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 41 58 Left 2
SYMATTR Value SINE(0 22.627 50)
SYMATTR InstName V2
SYMBOL voltage 672 128 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value -5
SYMBOL Opamps\\opamp2 896 -640 R0
WINDOW 3 -108 113 Left 2
SYMATTR Value TLC2272
SYMATTR InstName U2
SYMBOL res 1008 -752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL cap 1184 -528 R0
WINDOW 0 32 -6 Left 2
SYMATTR InstName C2
SYMATTR Value 20µ
SYMBOL res 1072 -560 R0
WINDOW 3 41 74 Left 2
SYMATTR Value 1000k
SYMATTR InstName R7
SYMBOL diode 976 -592 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value D1N4007
SYMBOL Opamps\\opamp2 592 -624 R0
WINDOW 3 -108 113 Left 2
SYMATTR Value TLC2272
SYMATTR InstName U3
SYMBOL res 656 -752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 470k
SYMBOL res 480 -752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL res 800 -576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL Opamps\\opamp2 928 -384 R0
WINDOW 3 -119 118 Left 2
SYMATTR Value TLC2272
SYMATTR InstName U4
SYMBOL Opamps\\opamp2 928 -160 R0
WINDOW 3 -122 115 Left 2
SYMATTR Value TLC2272
SYMATTR InstName U5
SYMBOL cap 1312 -176 R0
SYMATTR InstName C3
SYMATTR Value 20µ
SYMBOL res 1312 -208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 56k
SYMBOL res 624 -176 R0
SYMATTR InstName R12
SYMATTR Value 1.995k
SYMBOL res 624 -288 R0
SYMATTR InstName R13
SYMATTR Value 100k
SYMBOL res 432 -176 R0
SYMATTR InstName R14
SYMATTR Value 1.995k
SYMBOL res 432 -288 R0
SYMATTR InstName R15
SYMATTR Value 100k
SYMBOL res -128 -992 R0
SYMATTR InstName R16
SYMATTR Value 1k
SYMBOL cap 0 -976 R0
SYMATTR InstName C4
SYMATTR Value 22µ
SYMBOL res -64 -832 R0
SYMATTR InstName R17
SYMATTR Value 0.03
SYMBOL AutoGenerated\\XOR_2 1088 -208 R0
SYMATTR InstName U7
TEXT 272 168 Left 2 !.inc D1N4007.lib
TEXT 272 208 Left 2 !.inc TLC2272.lib
TEXT 272 128 Left 2 !.tran 0 1.5 0 500m uic
TEXT 272 240 Left 2 !.inc digital.lib
