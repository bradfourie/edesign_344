Version 4
SHEET 1 3340 2212
WIRE -1472 -320 -1584 -320
WIRE -1296 -320 -1392 -320
WIRE 864 -320 864 -352
WIRE -768 -304 -816 -304
WIRE -656 -304 -688 -304
WIRE -592 -304 -656 -304
WIRE -464 -304 -512 -304
WIRE -240 -304 -352 -304
WIRE -64 -304 -160 -304
WIRE 832 -304 800 -304
WIRE 976 -288 896 -288
WIRE -1872 -272 -1904 -272
WIRE -1808 -272 -1824 -272
WIRE -1760 -272 -1808 -272
WIRE -816 -272 -816 -304
WIRE 832 -272 800 -272
WIRE 576 -256 576 -272
WIRE -1760 -224 -1760 -272
WIRE 864 -224 864 -256
WIRE -1488 -192 -1488 -224
WIRE 1088 -192 1056 -192
WIRE -1584 -176 -1584 -320
WIRE -1520 -176 -1584 -176
WIRE -256 -176 -256 -208
WIRE 976 -176 976 -288
WIRE 992 -176 976 -176
WIRE -1408 -160 -1456 -160
WIRE -1296 -160 -1296 -320
WIRE -1296 -160 -1344 -160
WIRE -1184 -160 -1296 -160
WIRE -1136 -160 -1184 -160
WIRE -560 -160 -560 -192
WIRE -352 -160 -352 -304
WIRE -288 -160 -352 -160
WIRE 576 -160 576 -176
WIRE 576 -160 544 -160
WIRE 1120 -160 1120 -208
WIRE 1120 -160 1056 -160
WIRE 1152 -160 1120 -160
WIRE 1264 -160 1232 -160
WIRE -1760 -144 -1808 -144
WIRE -1680 -144 -1760 -144
WIRE -1520 -144 -1600 -144
WIRE -656 -144 -656 -304
WIRE -592 -144 -656 -144
WIRE -176 -144 -224 -144
WIRE -64 -144 -64 -304
WIRE -64 -144 -112 -144
WIRE 48 -144 -64 -144
WIRE 112 -144 48 -144
WIRE 576 -144 576 -160
WIRE 1264 -144 1264 -160
WIRE -1296 -128 -1296 -160
WIRE -464 -128 -464 -304
WIRE -464 -128 -528 -128
WIRE -448 -128 -464 -128
WIRE -288 -128 -368 -128
WIRE -1184 -112 -1184 -160
WIRE -592 -112 -720 -112
WIRE -64 -112 -64 -144
WIRE 48 -96 48 -144
WIRE 864 -96 864 -128
WIRE 832 -80 800 -80
WIRE -1488 -64 -1488 -128
WIRE -256 -64 -256 -112
WIRE 1088 -64 1088 -192
WIRE 1088 -64 896 -64
WIRE -560 -48 -560 -96
WIRE -464 -48 -464 -128
WIRE 576 -48 576 -64
WIRE 832 -48 800 -48
WIRE -1760 -16 -1760 -64
WIRE -1296 -16 -1296 -48
WIRE -1184 -16 -1184 -48
WIRE 1264 -16 1264 -80
WIRE -64 0 -64 -32
WIRE 48 0 48 -32
WIRE 864 0 864 -32
WIRE -1488 128 -1488 80
WIRE -1360 128 -1360 80
WIRE 752 144 752 112
WIRE 912 144 912 112
WIRE 1072 144 1072 112
WIRE -384 176 -384 112
WIRE -272 176 -272 112
WIRE -160 176 -160 128
WIRE -1488 272 -1488 208
WIRE 752 288 752 224
WIRE 912 288 912 224
WIRE 1072 288 1072 224
WIRE -384 320 -384 256
WIRE -272 320 -272 256
WIRE -160 320 -160 256
WIRE -1360 352 -1360 208
FLAG -1488 272 0
FLAG -1488 80 5V
IOPIN -1488 80 Out
FLAG -1488 -224 5V
IOPIN -1488 -224 Out
FLAG -1184 -16 0
FLAG -1760 -16 0
FLAG -1296 -16 0
FLAG -1360 352 0
FLAG -1360 80 input
IOPIN -1360 80 Out
FLAG -1904 -272 input
IOPIN -1904 -272 Out
FLAG -1136 -160 voltage_peak
IOPIN -1136 -160 Out
FLAG -1488 -64 0
FLAG -1808 -144 v_meas
IOPIN -1808 -144 Out
FLAG -384 320 0
FLAG -272 320 0
FLAG -272 112 -5V
IOPIN -272 112 Out
FLAG -384 112 5V
IOPIN -384 112 Out
FLAG -256 -208 5V
IOPIN -256 -208 Out
FLAG 48 0 0
FLAG -64 0 0
FLAG 112 -144 voltage_peak
IOPIN 112 -144 Out
FLAG -256 -64 -5V
IOPIN -256 -64 Out
FLAG -160 320 0
FLAG -160 128 input
IOPIN -160 128 Out
FLAG -560 -192 5V
IOPIN -560 -192 Out
FLAG -560 -48 -5V
IOPIN -560 -48 Out
FLAG -720 -112 input
IOPIN -720 -112 Out
FLAG -816 -272 0
FLAG -464 -48 i_meas
IOPIN -464 -48 Out
FLAG 752 288 0
FLAG 752 112 5V
IOPIN 752 112 Out
FLAG 912 288 0
FLAG 912 112 input1
IOPIN 912 112 Out
FLAG 1072 288 0
FLAG 1072 112 input2
IOPIN 1072 112 Out
FLAG 800 -272 input1
IOPIN 800 -272 Out
FLAG 864 -352 5V
IOPIN 864 -352 Out
FLAG 864 -224 0
FLAG 1120 -208 pwm
IOPIN 1120 -208 Out
FLAG 800 -48 input2
IOPIN 800 -48 Out
FLAG 864 -128 5V
IOPIN 864 -128 Out
FLAG 864 0 0
FLAG 1264 -16 0
FLAG 576 -48 0
FLAG 576 -272 5V
IOPIN 576 -272 Out
FLAG 544 -160 ref
IOPIN 544 -160 Out
FLAG 800 -304 ref
IOPIN 800 -304 Out
FLAG 800 -80 ref
IOPIN 800 -80 Out
SYMBOL voltage -1488 112 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL Opamps\\opamp2 -1488 -224 R0
WINDOW 3 -108 113 Left 2
SYMATTR Value TLC2272
SYMATTR InstName U1
SYMBOL res -1776 -240 R0
SYMATTR InstName R1
SYMATTR Value 56k
SYMBOL res -1776 -160 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res -1376 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL cap -1200 -112 R0
WINDOW 0 32 -6 Left 2
SYMATTR InstName C1
SYMATTR Value 20µ
SYMBOL res -1312 -144 R0
WINDOW 3 41 74 Left 2
SYMATTR Value 1000k
SYMATTR InstName R4
SYMBOL diode -1408 -176 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value D1N4007
SYMBOL res -1584 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL diode -1872 -288 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value D1N4007
SYMBOL voltage -1360 112 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value SINE(0 22.627 50)
SYMBOL voltage -384 160 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL voltage -272 160 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value -5
SYMBOL Opamps\\opamp2 -256 -208 R0
WINDOW 3 -108 113 Left 2
SYMATTR Value TLC2272
SYMATTR InstName U2
SYMBOL res -144 -320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL cap 32 -96 R0
WINDOW 0 32 -6 Left 2
SYMATTR InstName C2
SYMATTR Value 20µ
SYMBOL res -80 -128 R0
WINDOW 3 41 74 Left 2
SYMATTR Value 1000k
SYMATTR InstName R7
SYMBOL diode -176 -160 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value D1N4007
SYMBOL voltage -160 160 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 11 117 Left 2
SYMATTR Value SINE(0 3m 50)
SYMATTR InstName V5
SYMBOL Opamps\\opamp2 -560 -192 R0
WINDOW 3 -108 113 Left 2
SYMATTR Value TLC2272
SYMATTR InstName U3
SYMBOL res -496 -320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 470k
SYMBOL res -672 -320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL res -352 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL voltage 752 128 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value 5
SYMBOL voltage 912 128 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 11 117 Left 2
SYMATTR Value SINE(0 2 50)
SYMATTR InstName V7
SYMBOL voltage 1072 128 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 12 116 Left 2
SYMATTR Value SINE(0 2 50 0 0 90)
SYMATTR InstName V8
SYMBOL Opamps\\opamp2 864 -352 R0
WINDOW 3 -119 118 Left 2
SYMATTR Value TLC2272
SYMATTR InstName U4
SYMBOL Opamps\\opamp2 864 -128 R0
WINDOW 3 -122 115 Left 2
SYMATTR Value TLC2272
SYMATTR InstName U5
SYMBOL cap 1248 -144 R0
SYMATTR InstName C3
SYMATTR Value 10µ
SYMBOL res 1248 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 20k
SYMBOL res 560 -160 R0
SYMATTR InstName R12
SYMATTR Value 1.995k
SYMBOL res 560 -272 R0
SYMATTR InstName R13
SYMATTR Value 100k
SYMBOL AutoGenerated\\XOR_2 1024 -176 R0
SYMATTR InstName U6
TEXT -1832 152 Left 2 !.inc TLC2272.lib
TEXT -1832 192 Left 2 !.lib D1N4007.lib
TEXT -1832 112 Left 2 !.tran 0 5 500m 100m uic
TEXT -632 208 Left 2 !.inc D1N4007.lib
TEXT -632 248 Left 2 !.inc TLC2272.lib
TEXT -632 168 Left 2 !.tran 0 2 0.5 50m uic
TEXT 480 184 Left 2 !.inc D1N4007.lib
TEXT 480 224 Left 2 !.inc TLC2272.lib
TEXT 480 144 Left 2 !.tran 0 1 0 50m
TEXT 480 256 Left 2 !.inc digital.lib
